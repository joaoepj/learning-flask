{% extends "base.html" %}

{% block content %}


<div id="res" class="alert"></div>
<div>
    <form id="test"></form>
    <span id="data"></span>
</div>
<script type="text/javascript" src="static/jquery.min.js"></script>
<script type="text/javascript" src="static/underscore.js"></script>
<script type="text/javascript" src="static/jsonform.js"></script>
<script type="text/javascript">

    var data1 = '{{data | tojson | safe}}';
    //document.getElementById('data').innerHTML = data1;
    data2 = JSON.parse(data1)
    console.log(data2[0]['arguments']['Dhcp4'].subnet4)
        $('#test').jsonForm({
            'schema': {
                'subnet4': {
                    'type': 'array',
                    'title': 'Subnets IPv4',
                    'items': {
                        'type': 'object',
                        'properties': {
                            'subnet': {
                                'type': 'string',
                                'title': 'Subnet',
                                'required': true
                            },
                            'pools': {
                                'type': 'array',
                                'title': 'Pools',
                                'items': {
                                    'type': 'object',
                                    'properties': {
                                        'pool': {
                                            'type': 'string',
                                            'notitle': true
                                        },
                                    }
                                }
                            },
                            'reservations': {
                                'type': 'array',
                                'title': 'Reservations',
                                'items': {
                                    'type': 'object',
                                    'properties': {
                                        'hw-address': {
                                            'type': 'string',
                                            'title': 'MAC Address'
                                        },
                                        'ip-address': {
                                            'type': 'string',
                                            'title': 'IP Address'
                                        },
                                    }
                                }
                            }
                        }

                    }
                },
                
            },
            value: data2[0]['arguments']['Dhcp4'].subnet4,
            onSubmit: function (errors, values) {
                if (errors) {
                    $('#res').html('<p>I beg your pardon?</p>');
                } else {
                    $('#res').html('<p>Hello ' + values.name + '.' +
                        (values.age ? '<br/>You are ' + values.age + '.' : '') +
                        '</p>');
                }
            }
        });


</script>


{% endblock content %}